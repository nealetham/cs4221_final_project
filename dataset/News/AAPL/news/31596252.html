<!DOCTYPE html>
<html lang="en"><head><title data-rh="true">Can machine learning help build a better stock portfolio? | by JP Hwang | Towards Data Science</title><meta charset="utf-8" data-rh="true"/><meta content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1" data-rh="true" name="viewport"/><meta content="#000000" data-rh="true" name="theme-color"/><meta content="Medium" data-rh="true" name="twitter:app:name:iphone"/><meta content="828256236" data-rh="true" name="twitter:app:id:iphone"/><meta content="Medium" data-rh="true" property="al:ios:app_name"/><meta content="828256236" data-rh="true" property="al:ios:app_store_id"/><meta content="com.medium.reader" data-rh="true" property="al:android:package"/><meta content="542599432471018" data-rh="true" property="fb:app_id"/><meta content="Medium" data-rh="true" property="og:site_name"/><meta content="article" data-rh="true" property="og:type"/><meta content="2020-05-07T16:16:40.128Z" data-rh="true" property="article:published_time"/><meta content="Can machine learning help build a better stock portfolio? | by JP Hwang | Towards Data Science" data-rh="true" name="title"/><meta content="Can machine learning help build a better stock portfolio?" data-rh="true" property="og:title"/><meta content="medium://p/8e4b3334a49" data-rh="true" property="al:android:url"/><meta content="medium://p/8e4b3334a49" data-rh="true" property="al:ios:url"/><meta content="Medium" data-rh="true" property="al:android:app_name"/><meta content="Machine learning has conquered many fronts in the last decade, from Netflix recommendations, medical diagnoses, or even developing pharmaceuticals. Naturally, many looked to apply this new tool to…" data-rh="true" name="description"/><meta content="Analysis of stock price charts to quantify correlations for portfolio optimisation (with Python code &amp; data)." data-rh="true" property="og:description"/><meta content="https://towardsdatascience.com/can-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49" data-rh="true" property="og:url"/><meta content="https://towardsdatascience.com/can-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49" data-rh="true" property="al:web:url"/><meta content="https://miro.medium.com/v2/resize:fit:1200/1*RDNz4IUN3GboL55CQOAEDw.png" data-rh="true" property="og:image"/><meta content="https://medium.com/@_jphwang" data-rh="true" property="article:author"/><meta content="JP Hwang" data-rh="true" name="author"/><meta content="noindex,noarchive,follow,max-image-preview:large" data-rh="true" name="robots"/><meta content="origin" data-rh="true" name="referrer"/><meta content="Can machine learning help build a better stock portfolio?" data-rh="true" property="twitter:title"/><meta content="@TDataScience" data-rh="true" name="twitter:site"/><meta content="medium://p/8e4b3334a49" data-rh="true" name="twitter:app:url:iphone"/><meta content="Analysis of stock price charts to quantify correlations for portfolio optimisation (with Python code &amp; data)." data-rh="true" property="twitter:description"/><meta content="https://miro.medium.com/v2/resize:fit:1200/1*RDNz4IUN3GboL55CQOAEDw.png" data-rh="true" name="twitter:image:src"/><meta content="summary_large_image" data-rh="true" name="twitter:card"/><meta content="@_jphwang" data-rh="true" name="twitter:creator"/><meta content="Reading time" data-rh="true" name="twitter:label1"/><meta content="8 min read" data-rh="true" name="twitter:data1"/><link data-rh="true" href="https://miro.medium.com/v2/resize:fill:256:256/1*VzTUkfeGymHP4Bvav-T-lA.png" rel="icon"/><link data-rh="true" href="/osd.xml" rel="search" title="Medium" type="application/opensearchdescription+xml"/><link data-rh="true" href="https://miro.medium.com/v2/resize:fill:304:304/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156" rel="apple-touch-icon" sizes="152x152"/><link data-rh="true" href="https://miro.medium.com/v2/resize:fill:240:240/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156" rel="apple-touch-icon" sizes="120x120"/><link data-rh="true" href="https://miro.medium.com/v2/resize:fill:152:152/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156" rel="apple-touch-icon" sizes="76x76"/><link data-rh="true" href="https://miro.medium.com/v2/resize:fill:120:120/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156" rel="apple-touch-icon" sizes="60x60"/><link color="#171717" data-rh="true" href="https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png" rel="mask-icon"/><link as="style" data-rh="true" href="https://glyph.medium.com/css/unbound.css" id="glyph_preload_link" rel="preload" type="text/css"/><link data-rh="true" href="https://glyph.medium.com/css/unbound.css" id="glyph_link" rel="stylesheet" type="text/css"/><link data-rh="true" href="https://medium.com/@_jphwang" rel="author"/><link data-rh="true" href="https://towardsdatascience.com/can-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49" rel="canonical"/><link data-rh="true" href="android-app://com.medium.reader/https/medium.com/p/8e4b3334a49" rel="alternate"/></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><div class="l c"><div class="l m n o c"><div class="p q r s t u v w x i d y z"><a class="du ag dv bf ak b am an ao ap aq ar as at s u w i d q dw z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F8e4b3334a49&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderCollection&amp;source=---top_nav_layout_nav----------------------------------" rel="noopener follow">Open in app<svg class="dt" fill="none" height="10" viewbox="0 0 10 10" width="10" xmlns="http://www.w3.org/2000/svg"><path d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z" fill="currentColor"></path></svg></a><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign up</a></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="p q r ab ac"><div class="ab q ae"><a aria-label="Homepage" class="af ag ah ai aj ak al am an ao ap aq ar as at ab" data-testid="headerMediumLogo" href="https://medium.com/?source=---top_nav_layout_nav----------------------------------" rel="noopener follow"><svg class="au av aw" fill="none" height="160" viewbox="0 0 719 160" width="719" xmlns="http://www.w3.org/2000/svg"><path d="m174.104 9.734.215-.047V8.02H130.39L89.6 103.89 48.81 8.021H1.472v1.666l.212.047c8.018 1.81 12.09 4.509 12.09 14.242V137.93c0 9.734-4.087 12.433-12.106 14.243l-.212.047v1.671h32.118v-1.665l-.213-.048c-8.018-1.809-12.089-4.509-12.089-14.242V30.586l52.399 123.305h2.972l53.925-126.743V140.75c-.687 7.688-4.721 10.062-11.982 11.701l-.215.05v1.652h55.948v-1.652l-.215-.05c-7.269-1.639-11.4-4.013-12.087-11.701l-.037-116.774h.037c0-9.733 4.071-12.432 12.087-14.242m25.555 75.488c.915-20.474 8.268-35.252 20.606-35.507 3.806.063 6.998 1.312 9.479 3.714 5.272 5.118 7.751 15.812 7.368 31.793zm-.553 5.77h65.573v-.275c-.186-15.656-4.721-27.834-13.466-36.196-7.559-7.227-18.751-11.203-30.507-11.203h-.263c-6.101 0-13.584 1.48-18.909 4.16-6.061 2.807-11.407 7.003-15.855 12.511-7.161 8.874-11.499 20.866-12.554 34.343q-.05.606-.092 1.212a50 50 0 0 0-.065 1.151 85.807 85.807 0 0 0-.094 5.689c.71 30.524 17.198 54.917 46.483 54.917 25.705 0 40.675-18.791 44.407-44.013l-1.886-.664c-6.557 13.556-18.334 21.771-31.738 20.769-18.297-1.369-32.314-19.922-31.042-42.395m139.722 41.359c-2.151 5.101-6.639 7.908-12.653 7.908s-11.513-4.129-15.418-11.63c-4.197-8.053-6.405-19.436-6.405-32.92 0-28.067 8.729-46.22 22.24-46.22 5.657 0 10.111 2.807 12.236 7.704zm43.499 20.008c-8.019-1.897-12.089-4.722-12.089-14.951V1.309l-48.716 14.353v1.757l.299-.024c6.72-.543 11.278.386 13.925 2.83 2.072 1.915 3.082 4.853 3.082 8.987v18.66c-4.803-3.067-10.516-4.56-17.448-4.56-14.059 0-26.909 5.92-36.176 16.672-9.66 11.205-14.767 26.518-14.767 44.278-.003 31.72 15.612 53.039 38.851 53.039 13.595 0 24.533-7.449 29.54-20.013v16.865h43.711v-1.746zM424.1 19.819c0-9.904-7.468-17.374-17.375-17.374-9.859 0-17.573 7.632-17.573 17.374s7.721 17.374 17.573 17.374c9.907 0 17.375-7.47 17.375-17.374m11.499 132.546c-8.019-1.897-12.089-4.722-12.089-14.951h-.035V43.635l-43.714 12.551v1.705l.263.024c9.458.842 12.047 4.1 12.047 15.152v81.086h43.751v-1.746zm112.013 0c-8.018-1.897-12.089-4.722-12.089-14.951V43.635l-41.621 12.137v1.71l.246.026c7.733.813 9.967 4.257 9.967 15.36v59.279c-2.578 5.102-7.415 8.131-13.274 8.336-9.503 0-14.736-6.419-14.736-18.073V43.638l-43.714 12.55v1.703l.262.024c9.459.84 12.05 4.097 12.05 15.152v50.17a56.3 56.3 0 0 0 .91 10.444l.787 3.423c3.701 13.262 13.398 20.197 28.59 20.197 12.868 0 24.147-7.966 29.115-20.43v17.311h43.714v-1.747zm169.818 1.788v-1.749l-.213-.05c-8.7-2.006-12.089-5.789-12.089-13.49v-63.79c0-19.89-11.171-31.761-29.883-31.761-13.64 0-25.141 7.882-29.569 20.16-3.517-13.01-13.639-20.16-28.606-20.16-13.146 0-23.449 6.938-27.869 18.657V43.643L545.487 55.68v1.715l.263.024c9.345.829 12.047 4.181 12.047 14.95v81.784h40.787v-1.746l-.215-.053c-6.941-1.631-9.181-4.606-9.181-12.239V66.998c1.836-4.289 5.537-9.37 12.853-9.37 9.086 0 13.692 6.296 13.692 18.697v77.828h40.797v-1.746l-.215-.053c-6.94-1.631-9.18-4.606-9.18-12.239V75.066a42 42 0 0 0-.578-7.26c1.947-4.661 5.86-10.177 13.475-10.177 9.214 0 13.691 6.114 13.691 18.696v77.828z" fill="#242424"></path></svg></a><div class="ax h"><div class="ab ay az ba bb q bc bd"><div aria-describedby="searchResults" aria-hidden="false" aria-labelledby="searchResults" class="bm"></div><div class="bn bo ab"><svg fill="none" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" fill="currentColor" fill-rule="evenodd"></path></svg></div><input aria-controls="searchResults" aria-expanded="false" aria-label="search" class="ay be bf bg z bh bi bj bk bl" data-testid="headerSearchInput" placeholder="Search" role="combobox" tabindex="0" value=""/></div></div></div><div class="h k w fg fh"><div class="fi ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---top_nav_layout_nav-----------------------new_post_topnav-----------" rel="noopener follow"><div class="bf b bg z du fj fk ab q fl fm"><svg aria-label="Write" fill="none" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z" fill="currentColor"></path><path d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2" stroke="currentColor"></path></svg><div class="dt l">Write</div></div></a></span></div></div><div class="k j i d"><div class="fi ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" href="https://medium.com/search?source=---top_nav_layout_nav----------------------------------" rel="noopener follow"><div class="bf b bg z du fj fk ab q fl fm"><svg aria-label="Search" fill="none" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" fill="currentColor" fill-rule="evenodd"></path></svg></div></a></div></div><div class="fi h k j"><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign up</a></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div aria-hidden="false" class="l"><button aria-label="user options menu" class="ay fn am ab q ao fo fp fq" data-testid="headerUserIcon"><div class="l fj"><img alt="" class="l fd by bz ca cx" height="32" loading="lazy" role="presentation" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32"/><div class="fr by l bz ca fs n ay ft"></div></div></button></div></div></div><div class="l"><div class="fu fv fw fx fy l"><div class="ab cb"><div class="ci bh fz ga gb gc"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="fs gi gj gk gl gm"></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><div><h1 class="pw-post-title gs gt gu bf gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq bk" data-testid="storyTitle" id="2f1c">Can machine learning help build a better stock portfolio?</h1></div><div><h2 class="pw-subtitle-paragraph hr gt gu bf b hs ht hu hv hw hx hy hz ia ib ic id ie if ig cq du" id="5e9e">Analysis of stock price charts to quantify correlations for portfolio optimisation (with Python code &amp; data).</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="ih ii ij ik il ab"><div><div class="ab im"><div><div aria-hidden="false" class="bm"><a href="https://medium.com/@_jphwang?source=post_page---byline--8e4b3334a49--------------------------------" rel="noopener follow"><div class="l in io by ip iq"><div class="l fj"><img alt="JP Hwang" class="l fd by dd de cx" data-testid="authorPhoto" height="44" loading="lazy" src="https://miro.medium.com/v2/resize:fill:88:88/2*N9fq8hfQA-RlyGI29dvkbw.jpeg" width="44"/><div class="ir by l dd de fs n is ft"></div></div></div></a></div></div><div class="it ab fj"><div><div aria-hidden="false" class="bm"><a href="https://towardsdatascience.com/?source=post_page---byline--8e4b3334a49--------------------------------" rel="noopener follow"><div class="l iu iv by ip iw"><div class="l fj"><img alt="Towards Data Science" class="l fd by br ix cx" data-testid="publicationPhoto" height="24" loading="lazy" src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg" width="24"/><div class="ir by l br ix fs n is ft"></div></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="iy ab q"><div class="ab q iz"><div class="ab q"><div><div aria-hidden="false" class="bm"><p class="bf b ja jb bk"><a class="af ag ah ai aj ak al am an ao ap aq ar jc" data-testid="authorName" href="https://medium.com/@_jphwang?source=post_page---byline--8e4b3334a49--------------------------------" rel="noopener follow">JP Hwang</a></p></div></div></div><span aria-hidden="true" class="jd je"><span class="bf b bg z du">·</span></span><p class="bf b ja jb du"><span><a class="jf jg ah ai aj ak al am an ao ap aq ar ex jh ji" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F964fe0870229&amp;operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;user=JP+Hwang&amp;userId=964fe0870229&amp;source=post_page-964fe0870229--byline--8e4b3334a49---------------------post_header-----------" rel="noopener follow">Follow</a></span></p></div></div></span></div></div><div class="l jj"><span class="bf b bg z du"><div class="ab cn jk jl jm"><div class="jn jo ab"><div class="bf b bg z du ab jp"><span class="jq l jj">Published in</span><div><div aria-hidden="false" class="l"><a class="af ag ah ai aj ak al am an ao ap aq ar jc ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b bg z jr js jt ju jv jw jx jy bk">Towards Data Science</p></a></div></div></div><div class="h k"><span aria-hidden="true" class="jd je"><span class="bf b bg z du">·</span></span></div></div><span class="bf b bg z du"><div class="ab ae"><span data-testid="storyReadTime">8 min read</span><div aria-hidden="true" class="jz ka l"><span aria-hidden="true" class="l"><span class="bf b bg z du">·</span></span></div><span data-testid="storyPublishDate">May 7, 2020</span></div></span></div></span></div></div></div><div class="ab cp kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq"><div class="h k w fg fh q"><div class="lg l"><div class="ab q lh li"><div class="pw-multi-vote-icon fj jq lj lk ll"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8e4b3334a49&amp;operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;user=JP+Hwang&amp;userId=964fe0870229&amp;source=---header_actions--8e4b3334a49---------------------clap_footer-----------" rel="noopener follow"><div><div aria-hidden="false" class="bm"><div class="lm ao ln lo lp lq am lr ls lt ll"><svg aria-label="clap" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" fill-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l lu lv lw lx ly lz ma"><p class="bf b dv z du"><span class="mb">--</span></p></div></div></div><div><div aria-hidden="false" class="bm"><button aria-label="responses" class="ao lm me mf ab q fk mg mh"><svg class="md" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bf b dv z du"><span class="pw-responses-count mc md">1</span></p></button></div></div></div><div class="ab q kr ks kt ku kv kw kx ky kz la lb lc ld le lf"><div class="mi k j i d"></div><div class="h k"></div><div class="fd mj cn"><div class="l ae"><div class="ab cb"><div class="mk ml mm mn mo mp ci bh"><div class="ab"><div aria-hidden="false" class="bm bh"><div><div aria-hidden="false" class="bm"><button aria-label="Listen" class="af fk ah ai aj ak al mq an ao ap ex mr ms mh mt mu mv mw mx s my mz na nb nc nd ne u nf ng nh" data-testid="audioPlayButton"><svg fill="none" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" fill="currentColor" fill-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Listen</p></div></button></div></div></div></div></div></div></div></div><div aria-describedby="postFooterSocialMenu" aria-hidden="false" aria-labelledby="postFooterSocialMenu" class="bm"><div><div aria-hidden="false" class="bm"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" class="af fk ah ai aj ak al mq an ao ap ex mr ms mh mt mu mv mw mx s my mz na nb nc nd ne u nf ng nh" data-testid="headerSocialShareButton"><svg fill="none" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" fill="currentColor" fill-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Share</p></div></button></div></div></div></div></div></div></div></div></div><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj nk"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*RDNz4IUN3GboL55CQOAEDw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*RDNz4IUN3GboL55CQOAEDw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*RDNz4IUN3GboL55CQOAEDw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*RDNz4IUN3GboL55CQOAEDw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*RDNz4IUN3GboL55CQOAEDw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*RDNz4IUN3GboL55CQOAEDw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RDNz4IUN3GboL55CQOAEDw.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*RDNz4IUN3GboL55CQOAEDw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*RDNz4IUN3GboL55CQOAEDw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*RDNz4IUN3GboL55CQOAEDw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*RDNz4IUN3GboL55CQOAEDw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*RDNz4IUN3GboL55CQOAEDw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*RDNz4IUN3GboL55CQOAEDw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*RDNz4IUN3GboL55CQOAEDw.png 1400w"/><img alt="" class="bh mp nv c" height="224" loading="eager" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">Making sense of stock price charts</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="bcd7">Machine learning has conquered many fronts in the last decade, from Netflix recommendations, medical diagnoses, or even developing pharmaceuticals.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="7c79">Naturally, many looked to apply this new tool to financial markets, which ironically showcased clear limitations of machine learning. Although many have attempted to predict future prices of stocks, that has proven to be quite elusive for most as it is tantamount to fortune telling.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="b5ff">The most common ingredient in successful machine learning applications is extremely clever <em class="ow">pattern recognition</em>.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="d259">They predict the next words in your email<em class="ow">based o</em>n the first few words, approximate housing prices<em class="ow">based on</em> others in the neighbourhood, or provide medical diagnosis<em class="ow">based o</em>n an X-ray image. All enabled from analysing a litany of prior, similar or related observations.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="7678">How would we apply this superpower to the markets?</p><h2 class="ox oy gu bf oz pa pb dy pc pd pe ea pf oj pg ph pi on pj pk pl or pm pn po pp bk" id="42b4">What about portfolio construction?</h2><p class="pw-post-body-paragraph oa ob gu oc b hs pq oe of hv pr oh oi oj ps ol om on pt op oq or pu ot ou ov gn bk" id="db87">Portfolios are built based on desired characteristics or outcomes. For example, you might build a portfolio designed to track the entire market or specific sectors. Or, your goal might be to build a diversified portfolio that would be resistant to fortunes in particular industries, by finding unrelated stocks or even those that move in opposite directions.</p><blockquote class="pv"><p class="pw px gu bf py pz qa qb qc qd qe ov du" id="8e17">We can use patterns hidden in the past to build better stock portfolios.</p></blockquote><p class="pw-post-body-paragraph oa ob gu oc b hs qf oe of hv qg oh oi oj qh ol om on qi op oq or qj ot ou ov gn bk" id="2379">In other words, you might look for stocks that are well-correlated, not correlated, of inversely correlated.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="40d8">This is seemingly a job perfectly suited for machine learning. In this article, I explore the task of comparing stock behaviours, identifying correlations and grouping, and using this information to build portfolios.</p><h1 class="qk oy gu bf oz ql qm hu pc qn qo hx pf qp qq qr qs qt qu qv qw qx qy qz ra rb bk" id="d1bc">Before we get started</h1><h2 class="ox oy gu bf oz pa pb dy pc pd pe ea pf oj pg ph pi on pj pk pl or pm pn po pp bk" id="f4d7"><code class="cx rc rd re rf b">Packages</code></h2><p class="pw-post-body-paragraph oa ob gu oc b hs pq oe of hv pr oh oi oj ps ol om on pt op oq or pu ot ou ov gn bk" id="46a2">I assume you’re familiar with python. Even if you’re relatively new, this tutorial shouldn’t be too tricky, though.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="b963">To follow along, you will need <code class="cx rc rd re rf b">pandas</code>, <code class="cx rc rd re rf b">scipy</code>, <code class="cx rc rd re rf b">sklearn</code> and <code class="cx rc rd re rf b">plotly</code>. Install each (in your virtual environment) with a simple <code class="cx rc rd re rf b">pip install [PACKAGE_NAME]</code>.</p><h2 class="ox oy gu bf oz pa pb dy pc pd pe ea pf oj pg ph pi on pj pk pl or pm pn po pp bk" id="a1af">Data</h2><p class="pw-post-body-paragraph oa ob gu oc b hs pq oe of hv pr oh oi oj ps ol om on pt op oq or pu ot ou ov gn bk" id="8f48">I include the code and data in my <a class="af rg" href="https://gitlab.com/jphwang/online_articles" rel="noopener ugc nofollow" target="_blank">GitLab repo here</a>, so you should be able to easily follow along by downloading/cloning the repo if you wish. The directory name is <code class="cx rc rd re rf b">stock_correlations</code>.</p><h1 class="qk oy gu bf oz ql qm hu pc qn qo hx pf qp qq qr qs qt qu qv qw qx qy qz ra rb bk" id="d709">Building A Stock Portfolio</h1><h2 class="ox oy gu bf oz pa pb dy pc pd pe ea pf oj pg ph pi on pj pk pl or pm pn po pp bk" id="036d">What are we looking for?</h2><p class="pw-post-body-paragraph oa ob gu oc b hs pq oe of hv pr oh oi oj ps ol om on pt op oq or pu ot ou ov gn bk" id="204b">For this project, we would like to be able to determine correlation of one stock to another. While there are numerous indicators of correlation, and even some factors such as primary industries which might be indicative of causality, let’s choose the simplest measure for now — <em class="ow">price</em>.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="fef1">We can get stock market data using an API (I use Tiingo, but you can use any others, such as those I discussed in <a class="af rg" href="/comparing-the-best-free-financial-market-data-apis-158ae73c16ba" rel="noopener" target="_blank">another article here</a>). Here’s a sample of the code that I use:</p><figure class="nl nm nn no np nq"><div class="rh jr l fj"><div class="ri rj l"></div></div></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="47e3">Now that we have the raw data, what we are aiming to do is to explore correlation of each stock price data with another. Intuitively speaking, the exercise can be described as determining ‘similarity’ of shapes of each stock price chart.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="1106">Let’s plot some of these shapes to visualise what we mean:</p><figure class="nl nm nn no np nq"><div class="rh jr l fj"><div class="ri rj l"></div></div></figure><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj rk"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*OnQZYB10BTTvloaNYKtRAw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*OnQZYB10BTTvloaNYKtRAw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*OnQZYB10BTTvloaNYKtRAw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*OnQZYB10BTTvloaNYKtRAw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*OnQZYB10BTTvloaNYKtRAw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*OnQZYB10BTTvloaNYKtRAw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OnQZYB10BTTvloaNYKtRAw.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*OnQZYB10BTTvloaNYKtRAw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*OnQZYB10BTTvloaNYKtRAw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*OnQZYB10BTTvloaNYKtRAw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*OnQZYB10BTTvloaNYKtRAw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*OnQZYB10BTTvloaNYKtRAw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*OnQZYB10BTTvloaNYKtRAw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*OnQZYB10BTTvloaNYKtRAw.png 1400w"/><img alt="" class="bh mp nv c" height="357" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">Selection of stock price charts — do some of these look correlated?</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="6857">Some of these look more correlated (i.e. ‘similar’) than others. Actually, for this kind of correlation analysis, the absolute scaling of the y-axis doesn’t matter so much. So we can update the graph to ignore the y values to be limited to individual subplots, essentially normalising them (at least, visually).</p><pre class="nl nm nn no np rl rf rm rn ay ro bk"><span class="ox oy gu rf b ja rp rq l jp rr" id="b63f">fig.update_yaxes(matches=<em class="ow">None</em>, showticklabels=<em class="ow">False</em>)</span></pre><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj rs"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*wO9V7UG2B2pOgjMo_koSqQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*wO9V7UG2B2pOgjMo_koSqQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*wO9V7UG2B2pOgjMo_koSqQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*wO9V7UG2B2pOgjMo_koSqQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*wO9V7UG2B2pOgjMo_koSqQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*wO9V7UG2B2pOgjMo_koSqQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wO9V7UG2B2pOgjMo_koSqQ.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*wO9V7UG2B2pOgjMo_koSqQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*wO9V7UG2B2pOgjMo_koSqQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*wO9V7UG2B2pOgjMo_koSqQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*wO9V7UG2B2pOgjMo_koSqQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*wO9V7UG2B2pOgjMo_koSqQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*wO9V7UG2B2pOgjMo_koSqQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*wO9V7UG2B2pOgjMo_koSqQ.png 1400w"/><img alt="" class="bh mp nv c" height="364" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">Selection of stock price charts — easier to see rough ‘similarity’</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="4011">Great! We now have something to use as a benchmark. But, how would we <em class="ow">quantify</em> correlation between each price chart?</p><h2 class="ox oy gu bf oz pa pb dy pc pd pe ea pf oj pg ph pi on pj pk pl or pm pn po pp bk" id="8562">Correlation calculation</h2><p class="pw-post-body-paragraph oa ob gu oc b hs pq oe of hv pr oh oi oj ps ol om on pt op oq or pu ot ou ov gn bk" id="0de0">For a spatial distribution, we know that the distribution shape vs correlation value look like this.</p><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj rt"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*uuLngjEnqVGJhzrKzw7vrw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*uuLngjEnqVGJhzrKzw7vrw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*uuLngjEnqVGJhzrKzw7vrw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*uuLngjEnqVGJhzrKzw7vrw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*uuLngjEnqVGJhzrKzw7vrw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*uuLngjEnqVGJhzrKzw7vrw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uuLngjEnqVGJhzrKzw7vrw.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*uuLngjEnqVGJhzrKzw7vrw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*uuLngjEnqVGJhzrKzw7vrw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*uuLngjEnqVGJhzrKzw7vrw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*uuLngjEnqVGJhzrKzw7vrw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*uuLngjEnqVGJhzrKzw7vrw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*uuLngjEnqVGJhzrKzw7vrw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*uuLngjEnqVGJhzrKzw7vrw.png 1400w"/><img alt="" class="bh mp nv c" height="320" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">Correlation examples (<a class="af rg" href="https://en.wikipedia.org/wiki/Correlation_and_dependence" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Correlation_and_dependence</a>)</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="5268">Determining correlation in stock prices is a different problem.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="eb7e">In a spatial distribution, the correlation is analysed between data in one dimension (X) against another (Y). On the other hand, each stock price data is already two-dimensional, as it charts price (Y) against time (t). In addition to that, we want to develop a method that will be used to compare potentially hundreds or thousands of stocks, all with different value ranges.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="1253">For now, let’s keep it simple and use <a class="af rg" href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient" rel="noopener ugc nofollow" target="_blank">Pearson correlation coefficients</a> as our measure of similarity. It is a relatively crude measure, but it will get the job done for what we are after, which is to demonstrate the concept.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="9a5e">How do we determine these values? Scipy has a built-in Pearson correlation function <code class="cx rc rd re rf b">scipy.stats.pearsonr()</code> to call upon.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="6294">The syntax to use this function is to simply call it with two inputs, like:</p><pre class="nl nm nn no np rl rf rm rn ay ro bk"><span class="ox oy gu rf b ja rp rq l jp rr" id="e306">scipy.stats.pearsonr(x, y)</span></pre><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="2e08">Where <em class="ow">x and y</em>can be scalars <em class="ow">or</em> vectors.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="935b">For example, we can compare a list with its exact inverse — something that would look like this:</p><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj ru"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*fRnc_kFEvFCzHW4FwSjZ0A.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*fRnc_kFEvFCzHW4FwSjZ0A.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*fRnc_kFEvFCzHW4FwSjZ0A.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*fRnc_kFEvFCzHW4FwSjZ0A.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*fRnc_kFEvFCzHW4FwSjZ0A.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*fRnc_kFEvFCzHW4FwSjZ0A.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fRnc_kFEvFCzHW4FwSjZ0A.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*fRnc_kFEvFCzHW4FwSjZ0A.png 640w, https://miro.medium.com/v2/resize:fit:720/1*fRnc_kFEvFCzHW4FwSjZ0A.png 720w, https://miro.medium.com/v2/resize:fit:750/1*fRnc_kFEvFCzHW4FwSjZ0A.png 750w, https://miro.medium.com/v2/resize:fit:786/1*fRnc_kFEvFCzHW4FwSjZ0A.png 786w, https://miro.medium.com/v2/resize:fit:828/1*fRnc_kFEvFCzHW4FwSjZ0A.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*fRnc_kFEvFCzHW4FwSjZ0A.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*fRnc_kFEvFCzHW4FwSjZ0A.png 1400w"/><img alt="" class="bh mp nv c" height="409" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">Perfect Inverse Correlation</figcaption></figure><pre class="nl nm nn no np rl rf rm rn ay ro bk"><span class="ox oy gu rf b ja rp rq l jp rr" id="418e">tmplist = list(range(10))<br/>scipy.stats.pearsonr(tmplist, tmplist[::-1])</span></pre><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="c1e5">Which, as expected, produces outputs (-1, 0) where -1 is the correlation (perfectly inverse), and 0 is the <a class="af rg" href="https://en.wikipedia.org/wiki/P-value" rel="noopener ugc nofollow" target="_blank">p-value</a>.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="8f26">Our stock data from the dataframe <code class="cx rc rd re rf b">total_ticker_df</code> can be compared using similar syntax. For given <code class="cx rc rd re rf b">i</code> and <code class="cx rc rd re rf b">j</code> values:</p><pre class="nl nm nn no np rl rf rm rn ay ro bk"><span class="ox oy gu rf b ja rp rq l jp rr" id="644c">ser_i = total_ticker_df[total_ticker_df.sym == symbols_ser[i]]['close'].values<br/>ser_j = total_ticker_df[total_ticker_df.sym == symbols_ser[j]]['close'].values<br/>r_ij, p_ij = scipy.stats.pearsonr(ser_i, ser_j)</span></pre><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="fef8">Comparing the data for Apple and Microsoft produces an extremely high correlation of 0.947, indicating their similar fortunes for the last 5 years as a tech conglomerate. On the other hand, comparing Apple and Exxon Mobile data produces a high negative correlation of -0.687 showing that their fortunes were quite the opposite to each other.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="2b7e">An inspection of the stock price charts visually bear this out:</p><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj rv"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*gUomQiqU0n7g4AHPEGz-ug.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*gUomQiqU0n7g4AHPEGz-ug.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*gUomQiqU0n7g4AHPEGz-ug.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*gUomQiqU0n7g4AHPEGz-ug.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*gUomQiqU0n7g4AHPEGz-ug.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*gUomQiqU0n7g4AHPEGz-ug.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gUomQiqU0n7g4AHPEGz-ug.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*gUomQiqU0n7g4AHPEGz-ug.png 640w, https://miro.medium.com/v2/resize:fit:720/1*gUomQiqU0n7g4AHPEGz-ug.png 720w, https://miro.medium.com/v2/resize:fit:750/1*gUomQiqU0n7g4AHPEGz-ug.png 750w, https://miro.medium.com/v2/resize:fit:786/1*gUomQiqU0n7g4AHPEGz-ug.png 786w, https://miro.medium.com/v2/resize:fit:828/1*gUomQiqU0n7g4AHPEGz-ug.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*gUomQiqU0n7g4AHPEGz-ug.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*gUomQiqU0n7g4AHPEGz-ug.png 1400w"/><img alt="" class="bh mp nv c" height="204" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">Similar / Reversals of fortunes</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="378a">These figures can be put together into a matrix of correlations, as such:</p><figure class="nl nm nn no np nq"><div class="rh jr l fj"><div class="ri rj l"></div></div></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="409e">Producing:</p><figure class="nl nm nn no np nq"><div class="rh jr l fj"><div class="ri rj l"></div></div></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="a2ae">This can be visualised as a heatmap with Plotly, with this snippet:</p><figure class="nl nm nn no np nq"><div class="rh jr l fj"><div class="ri rj l"></div></div></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="7706">To produce:</p><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj rw"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*NM1dqEasuwIs-Q97egz0Pg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*NM1dqEasuwIs-Q97egz0Pg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*NM1dqEasuwIs-Q97egz0Pg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*NM1dqEasuwIs-Q97egz0Pg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*NM1dqEasuwIs-Q97egz0Pg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*NM1dqEasuwIs-Q97egz0Pg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NM1dqEasuwIs-Q97egz0Pg.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*NM1dqEasuwIs-Q97egz0Pg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*NM1dqEasuwIs-Q97egz0Pg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*NM1dqEasuwIs-Q97egz0Pg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*NM1dqEasuwIs-Q97egz0Pg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*NM1dqEasuwIs-Q97egz0Pg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*NM1dqEasuwIs-Q97egz0Pg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*NM1dqEasuwIs-Q97egz0Pg.png 1400w"/><img alt="" class="bh mp nv c" height="337" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">A simple stock price correlation heatmap</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="040a">That’s fantastic. To recap, we’ve so far managed to download stock price data, calculate their correlations, and see which stocks might be correlated better than others.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="dc27">So, let’s take a look at this correlation data for some of the largest companies in the U.S. (by market cap).</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="f575">Upon inspection, the data still looks sensible, but it’s hard to make see very clear groups of data. The reason is that the ordering of companies here is by size, not by correlation.</p><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj rx"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*0LMG-4qOUBCMHJlLj6jjRw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*0LMG-4qOUBCMHJlLj6jjRw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*0LMG-4qOUBCMHJlLj6jjRw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*0LMG-4qOUBCMHJlLj6jjRw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*0LMG-4qOUBCMHJlLj6jjRw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*0LMG-4qOUBCMHJlLj6jjRw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0LMG-4qOUBCMHJlLj6jjRw.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*0LMG-4qOUBCMHJlLj6jjRw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*0LMG-4qOUBCMHJlLj6jjRw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*0LMG-4qOUBCMHJlLj6jjRw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*0LMG-4qOUBCMHJlLj6jjRw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*0LMG-4qOUBCMHJlLj6jjRw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*0LMG-4qOUBCMHJlLj6jjRw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*0LMG-4qOUBCMHJlLj6jjRw.png 1400w"/><img alt="" class="bh mp nv c" height="554" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">Correlation matrix heatmap for ~top 50 U.S. companies</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="9dd0">What we can do, instead, is to cluster related data here, using our similarity matrix. For that I will use scikit-learn’s <a class="af rg" href="https://scikit-learn.org/stable/modules/generated/sklearn.cluster.SpectralBiclustering.html?highlight=spectral+biclustering#sklearn.cluster.SpectralBiclustering" rel="noopener ugc nofollow" target="_blank">spectral biclustering algorithm</a>.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="ea75">Which clusters shuffled data into a ‘checkerboard’ pattern — in other words, there are underlying groups of data that are more similar than others (<a class="af rg" href="https://scikit-learn.org/stable/modules/biclustering.html#spectral-biclustering" rel="noopener ugc nofollow" target="_blank">further detailed explanation</a>). This is my implementation of it:</p><figure class="nl nm nn no np nq"><div class="rh jr l fj"><div class="ri rj l"></div></div></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="0fc9">And the resulting heatmap is as thus:</p><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj rx"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*j1ftaVPkb_nPObGpbvfs3g.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*j1ftaVPkb_nPObGpbvfs3g.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*j1ftaVPkb_nPObGpbvfs3g.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*j1ftaVPkb_nPObGpbvfs3g.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*j1ftaVPkb_nPObGpbvfs3g.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*j1ftaVPkb_nPObGpbvfs3g.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j1ftaVPkb_nPObGpbvfs3g.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*j1ftaVPkb_nPObGpbvfs3g.png 640w, https://miro.medium.com/v2/resize:fit:720/1*j1ftaVPkb_nPObGpbvfs3g.png 720w, https://miro.medium.com/v2/resize:fit:750/1*j1ftaVPkb_nPObGpbvfs3g.png 750w, https://miro.medium.com/v2/resize:fit:786/1*j1ftaVPkb_nPObGpbvfs3g.png 786w, https://miro.medium.com/v2/resize:fit:828/1*j1ftaVPkb_nPObGpbvfs3g.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*j1ftaVPkb_nPObGpbvfs3g.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*j1ftaVPkb_nPObGpbvfs3g.png 1400w"/><img alt="" class="bh mp nv c" height="554" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">Stock groups</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="1e1d">So there it is — we’ve successfully (although very crudely) grouped stocks based on their performance of the last five years. Obviously, this can be expanded to larger numbers of stocks and into finer subgroups.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="4770">How did we do? Let’s take a look at some groups of data. Here’s how I identified and plotted them:</p><figure class="nl nm nn no np nq"><div class="rh jr l fj"><div class="ri rj l"></div></div></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="f710">And the resulting charts:</p><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj ry"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*znh2WmL2VCjbcyiEnjYHoA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*znh2WmL2VCjbcyiEnjYHoA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*znh2WmL2VCjbcyiEnjYHoA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*znh2WmL2VCjbcyiEnjYHoA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*znh2WmL2VCjbcyiEnjYHoA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*znh2WmL2VCjbcyiEnjYHoA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*znh2WmL2VCjbcyiEnjYHoA.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*znh2WmL2VCjbcyiEnjYHoA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*znh2WmL2VCjbcyiEnjYHoA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*znh2WmL2VCjbcyiEnjYHoA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*znh2WmL2VCjbcyiEnjYHoA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*znh2WmL2VCjbcyiEnjYHoA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*znh2WmL2VCjbcyiEnjYHoA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*znh2WmL2VCjbcyiEnjYHoA.png 1400w"/><img alt="" class="bh mp nv c" height="347" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">AAPL and correlated stocks</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="2e29">All of these look pretty well related to each other in their overall shape! The results include tech giants like Microsoft and Intel that you’d expect to see well correlated with Apple performance, but also others such as MasterCard, Amgen and Abbott.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="9387">What about the other end? Well, here are the top 5 most inversely correlated stocks — take a look:</p><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj ry"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*_CgdAf89zgKkePhNxojfdw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*_CgdAf89zgKkePhNxojfdw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*_CgdAf89zgKkePhNxojfdw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*_CgdAf89zgKkePhNxojfdw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*_CgdAf89zgKkePhNxojfdw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*_CgdAf89zgKkePhNxojfdw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_CgdAf89zgKkePhNxojfdw.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*_CgdAf89zgKkePhNxojfdw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*_CgdAf89zgKkePhNxojfdw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*_CgdAf89zgKkePhNxojfdw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*_CgdAf89zgKkePhNxojfdw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*_CgdAf89zgKkePhNxojfdw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*_CgdAf89zgKkePhNxojfdw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*_CgdAf89zgKkePhNxojfdw.png 1400w"/><img alt="" class="bh mp nv c" height="347" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">AAPL and uncorrelated stocks</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="0829">These numbers paint a very different picture. Here, the remaining charts are clearly, and significantly inversely correlated to the first (AAPL) chart.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="1f1b">At a larger scale, this data can be used to collect groups of stocks that move together, or not, and to construct a portfolio.</p><h2 class="ox oy gu bf oz pa pb dy pc pd pe ea pf oj pg ph pi on pj pk pl or pm pn po pp bk" id="af67">A little bit extra (on our modelling assumptions)</h2><p class="pw-post-body-paragraph oa ob gu oc b hs pq oe of hv pr oh oi oj ps ol om on pt op oq or pu ot ou ov gn bk" id="1871">What we’ve put together above is a pretty simple model, and a way to group stocks together by their historical movement.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="9ace">But here’s one note — is it reasonable to group stocks based on a period that long? Actually, probably not so. First of all, our graph is going to be dominated by the last few months’ data where COVID-19’s impact and the market response is going to disproportionately impact graph shapes. Also, companies don’t stay stagnant! A company in 2015 often looks very different to that of 2020.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="afac">Take a look at this example comparing the same sets of stock data at different times. The chart on the left is for 2015, whereas the chart on the right is in 2019.</p><figure class="nl nm nn no np nq ni nj paragraph-image"><div class="nr ns fj nt bh nu" role="button" tabindex="0"><div class="ni nj rz"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*vARr7eKRZ8y34FbBmUSgqg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*vARr7eKRZ8y34FbBmUSgqg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*vARr7eKRZ8y34FbBmUSgqg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*vARr7eKRZ8y34FbBmUSgqg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*vARr7eKRZ8y34FbBmUSgqg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*vARr7eKRZ8y34FbBmUSgqg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vARr7eKRZ8y34FbBmUSgqg.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*vARr7eKRZ8y34FbBmUSgqg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*vARr7eKRZ8y34FbBmUSgqg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*vARr7eKRZ8y34FbBmUSgqg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*vARr7eKRZ8y34FbBmUSgqg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*vARr7eKRZ8y34FbBmUSgqg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*vARr7eKRZ8y34FbBmUSgqg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*vARr7eKRZ8y34FbBmUSgqg.png 1400w"/><img alt="" class="bh mp nv c" height="364" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="nw ff nx ni nj ny nz bf b bg z du">Correlation charts — 2015 vs 2019 — Very different!</figcaption></figure><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="8075">To another, more fundamental point, is a Pearson Correlation the best algorithm to assess stock correlation?</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="ba7e">If this basic introduction to identifying time-series similarities left you with more questions than answers, you’re not alone. In my next articles, I will tackle some of these points, comparing resulting groups of stocks against their manual classifications, assessing stocks’ movements between groups across time, and testing different algorithms.</p><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="c721">Until then, stay safe!</p></div></div></div><div class="ab cb sa sb sc sd" role="separator"><span class="se by bm sf sg sh"></span><span class="se by bm sf sg sh"></span><span class="se by bm sf sg"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="b99d">If you liked this, say 👋 / follow on <a class="af rg" href="https://twitter.com/_jphwang" rel="noopener ugc nofollow" target="_blank">twitter</a>, or follow for updates. ICYMI, I also wrote this article about financial data APIs:</p><div class="si sj sk sl sm sn"><a href="/comparing-the-best-free-financial-market-data-apis-158ae73c16ba?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow" target="_blank"><div class="so ab jj"><div class="sp ab co cb sq sr"><h2 class="bf gv ja z jr ss jt ju st jw jy gt bk">Comparing the best free financial market data APIs</h2><div class="su l"><h3 class="bf b ja z jr ss jt ju st jw jy du">Start here if you are looking to analyse financial market data — for stock markets or crypto, as a data scientist…</h3></div><div class="sv l"><p class="bf b dv z jr ss jt ju st jw jy du">towardsdatascience.com</p></div></div><div class="sw l"><div class="sx l sy sz ta sw tb mp sn"></div></div></div></a></div><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="d1de">and this about building web apps:</p><div class="si sj sk sl sm sn"><a href="/build-a-web-data-dashboard-in-just-minutes-with-python-d722076aee2b?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow" target="_blank"><div class="so ab jj"><div class="sp ab co cb sq sr"><h2 class="bf gv ja z jr ss jt ju st jw jy gt bk">Build a web data dashboard in just minutes with Python</h2><div class="su l"><h3 class="bf b ja z jr ss jt ju st jw jy du">Exponentially increase power &amp; accessibility by converting your data visualizations into a web-based dashboard with…</h3></div><div class="sv l"><p class="bf b dv z jr ss jt ju st jw jy du">towardsdatascience.com</p></div></div><div class="sw l"><div class="tc l sy sz ta sw tb mp sn"></div></div></div></a></div><p class="pw-post-body-paragraph oa ob gu oc b hs od oe of hv og oh oi oj ok ol om on oo op oq or os ot ou ov gn bk" id="fafc">😁👍❤️, JP</p></div></div></div></div></section></div></div></article></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="td te ab jm"><div class="su ab"><a class="tf ay am ao" href="https://medium.com/tag/data-science?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><div class="tg fj cx th ge ti tj bf b bg z bk tk">Data Science</div></a></div><div class="su ab"><a class="tf ay am ao" href="https://medium.com/tag/finance?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><div class="tg fj cx th ge ti tj bf b bg z bk tk">Finance</div></a></div><div class="su ab"><a class="tf ay am ao" href="https://medium.com/tag/technology?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><div class="tg fj cx th ge ti tj bf b bg z bk tk">Technology</div></a></div><div class="su ab"><a class="tf ay am ao" href="https://medium.com/tag/programming?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><div class="tg fj cx th ge ti tj bf b bg z bk tk">Programming</div></a></div><div class="su ab"><a class="tf ay am ao" href="https://medium.com/tag/stock-market?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><div class="tg fj cx th ge ti tj bf b bg z bk tk">Stock Market</div></a></div></div><div class="tl md l"><div class="je"><span class="bf b bg z du"><svg height="19" viewbox="0 0 19 19" width="19" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M4.128 12.213A15.4 15.4 0 0 1 1.595 9.93a7 7 0 0 1-.167-.198l-.245-.305.245-.305a13 13 0 0 1 .63-.697A15.4 15.4 0 0 1 3.753 6.92c1.814-1.384 3.76-2.22 5.77-2.22.613 0 1.272.13 1.972.374l-.797.772a4.5 4.5 0 0 0-1.176-.172c-1.763 0-3.519.755-5.178 2.021-.588.448-1.12.93-1.588 1.41-.278.287-.278.36 0 .647a14.4 14.4 0 0 0 2.085 1.772zm3.048 1.57c.77.243 1.553.373 2.346.373.7 0 1.458-.168 2.268-.483.992-.385 2.038-.98 3.105-1.726a25 25 0 0 0 2.679-2.169l.366-.351-.366-.352a23 23 0 0 0-.763-.682 25 25 0 0 0-2.283-1.737l-.716.695a24 24 0 0 1 2.366 1.784c.2.17.2.414 0 .584-.57.488-1.192.975-1.841 1.43-1.009.705-1.99 1.263-2.9 1.616-.705.274-1.349.417-1.915.417a6.6 6.6 0 0 1-1.535-.186z"></path><path d="M12.053 9.056q.024.174.024.354c0 1.457-1.22 2.639-2.723 2.639a3 3 0 0 1-.365-.024zM9.719 6.794a3 3 0 0 0-.365-.023c-1.504 0-2.723 1.181-2.723 2.639q0 .18.025.354zM3.603 14.305l-.35.34.679.7.35-.34L14.685 4.921l.35-.339-.679-.7-.35.34z"></path></g></svg> Unlisted</span></div></div></div></div><div class="l"></div><footer class="tm tn to tp tq tr ts tt tu ab q tv iw c"><div class="l ae"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ab cp tw"><div class="ab q lh"><div class="tx l"><span class="l ty tz ua e d"><div class="ab q lh li"><div class="pw-multi-vote-icon fj jq lj lk ll"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8e4b3334a49&amp;operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;user=JP+Hwang&amp;userId=964fe0870229&amp;source=---footer_actions--8e4b3334a49---------------------clap_footer-----------" rel="noopener follow"><div><div aria-hidden="false" class="bm"><div class="lm ao ln lo lp lq am lr ls lt ll"><svg aria-label="clap" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" fill-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l lu lv lw lx ly lz ma"><p class="bf b dv z du"><span class="mb">--</span></p></div></div></span><span class="l h g f ub uc"><div class="ab q lh li"><div class="pw-multi-vote-icon fj jq lj lk ll"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F8e4b3334a49&amp;operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;user=JP+Hwang&amp;userId=964fe0870229&amp;source=---footer_actions--8e4b3334a49---------------------clap_footer-----------" rel="noopener follow"><div><div aria-hidden="false" class="bm"><div class="lm ao ln lo lp lq am lr ls lt ll"><svg aria-label="clap" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" fill-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l lu lv lw lx ly lz ma"><p class="bf b dv z du"><span class="mb">--</span></p></div></div></span></div><div class="bq ab"><div><div aria-hidden="false" class="bm"><button aria-label="responses" class="ao lm me mf ab q fk mg mh"><svg class="md" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bf b bg z du"><span class="pw-responses-count mc md">1</span></p></button></div></div></div></div><div class="ab q"><div class="sh l jj"></div><div class="sh l jj"><div aria-describedby="postFooterSocialMenu" aria-hidden="false" aria-labelledby="postFooterSocialMenu" class="bm"><div><div aria-hidden="false" class="bm"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" class="af fk ah ai aj ak al mq an ao ap ex mr ms mh mt" data-testid="footerSocialShareButton"><svg fill="none" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" fill="currentColor" fill-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></footer><div class="ud ue uf ug uh l bx"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ui l"><div class="ab uj uk ul jl jk"><div class="um un uo up uq ur us ut uu uv ab cp"><div class="h k"><a href="https://towardsdatascience.com/?source=post_page---post_publication_info--8e4b3334a49--------------------------------" rel="noopener follow"><div class="fj ab"><img alt="Towards Data Science" class="uw in io cx" height="48" loading="lazy" src="https://miro.medium.com/v2/resize:fill:96:96/1*CJe3891yB1A1mzMdqemkdg.jpeg" width="48"/><div class="uw l io in fs n fr ux"></div></div></a></div><div class="j i d"><a href="https://towardsdatascience.com/?source=post_page---post_publication_info--8e4b3334a49--------------------------------" rel="noopener follow"><div class="fj ab"><img alt="Towards Data Science" class="uw uz uy cx" height="64" loading="lazy" src="https://miro.medium.com/v2/resize:fill:128:128/1*CJe3891yB1A1mzMdqemkdg.jpeg" width="64"/><div class="uw l uy uz fs n fr ux"></div></div></a></div><div class="j i d va jj"><div class="ab"><span><a class="bf b bg z vb tg vc vd ve vf vg ev ew vh vi vj fa fb fc fd bm fe ff" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science&amp;operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;collection=Towards+Data+Science&amp;collectionId=7f60cf5620c9&amp;source=post_page---post_publication_info--8e4b3334a49---------------------follow_profile-----------" rel="noopener follow">Follow</a></span></div></div></div><div class="ab co sq"><div class="vk vl vm vn vo l"><a class="af ag ah aj ak al am an ao ap aq ar as at ab q" href="https://towardsdatascience.com/?source=post_page---post_publication_info--8e4b3334a49--------------------------------" rel="noopener follow"><h2 class="pw-author-name bf vq vr vs vt vu vv vw oj ph pi on pk pl or pn po bk"><span class="gn vp">Published in <!-- -->Towards Data Science</span></h2></a><div class="su ab im"><div class="l jj"><span class="pw-follower-count bf b bg z du"><a class="af ag ah ai aj ak al am an ao ap aq ar jc" href="/followers?source=post_page---post_publication_info--8e4b3334a49--------------------------------" rel="noopener follow">765K Followers</a></span></div><div class="bf b bg z du ab jp"><span aria-hidden="true" class="jd l"><span class="bf b bg z du">·</span></span><a class="af ag ah ai aj ak al am an ao ap aq ar jc" href="/multimodal-models-llms-that-can-see-and-hear-5c6737c981d3?source=post_page---post_publication_info--8e4b3334a49--------------------------------" rel="noopener follow">Last published <!-- -->just now</a></div></div><div class="vx l"><p class="bf b bg z bk"><span class="gn">Your home for data science. A publication sharing concepts, ideas and codes.</span></p></div></div></div><div class="h k"><div class="ab"><span><a class="bf b bg z vb tg vc vd ve vf vg ev ew vh vi vj fa fb fc fd bm fe ff" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science&amp;operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;collection=Towards+Data+Science&amp;collectionId=7f60cf5620c9&amp;source=post_page---post_publication_info--8e4b3334a49---------------------follow_profile-----------" rel="noopener follow">Follow</a></span></div></div></div></div><div class="ab uj uk ul jl jk"><div class="um un uo up uq ur us ut uu uv ab cp"><div class="h k"><a href="https://medium.com/@_jphwang?source=post_page---post_author_info--8e4b3334a49--------------------------------" rel="noopener follow" tabindex="0"><div class="l fj"><img alt="JP Hwang" class="l fd by io in cx" height="48" loading="lazy" src="https://miro.medium.com/v2/resize:fill:96:96/2*N9fq8hfQA-RlyGI29dvkbw.jpeg" width="48"/><div class="fr by l io in fs n ay ux"></div></div></a></div><div class="j i d"><a href="https://medium.com/@_jphwang?source=post_page---post_author_info--8e4b3334a49--------------------------------" rel="noopener follow" tabindex="0"><div class="l fj"><img alt="JP Hwang" class="l fd by uy uz cx" height="64" loading="lazy" src="https://miro.medium.com/v2/resize:fill:128:128/2*N9fq8hfQA-RlyGI29dvkbw.jpeg" width="64"/><div class="fr by l uy uz fs n ay ux"></div></div></a></div><div class="j i d va jj"><div class="ab"><span><a class="bf b bg z vb tg vc vd ve vf vg ev ew vh vi vj fa fb fc fd bm fe ff" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F964fe0870229&amp;operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;user=JP+Hwang&amp;userId=964fe0870229&amp;source=post_page-964fe0870229--post_author_info--8e4b3334a49---------------------follow_profile-----------" rel="noopener follow">Follow</a></span></div></div></div><div class="ab co sq"><div class="vk vl vm vn vo l"><a class="af ag ah aj ak al am an ao ap aq ar as at ab q" href="https://medium.com/@_jphwang?source=post_page---post_author_info--8e4b3334a49--------------------------------" rel="noopener follow"><h2 class="pw-author-name bf vq vr vs vt vu vv vw oj ph pi on pk pl or pn po bk"><span class="gn vp">Written by <!-- -->JP Hwang</span></h2></a><div class="su ab im"><div class="l jj"><span class="pw-follower-count bf b bg z du"><a class="af ag ah ai aj ak al am an ao ap aq ar jc" href="https://medium.com/@_jphwang/followers?source=post_page---post_author_info--8e4b3334a49--------------------------------" rel="noopener follow">2.2K Followers</a></span></div><div class="bf b bg z du ab jp"><span aria-hidden="true" class="jd l"><span class="bf b bg z du">·</span></span><a class="af ag ah ai aj ak al am an ao ap aq ar jc" href="https://medium.com/@_jphwang/following?source=post_page---post_author_info--8e4b3334a49--------------------------------" rel="noopener follow">71 Following</a></div></div><div class="vx l"><p class="bf b bg z bk"><span class="gn">Tech / Data science writer &amp; educator; Python dev; sports analytics enthusiast. 🇦🇺 🐦: @_jphwang</span></p></div></div></div><div class="h k"><div class="ab"><span><a class="bf b bg z vb tg vc vd ve vf vg ev ew vh vi vj fa fb fc fd bm fe ff" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F964fe0870229&amp;operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fcan-machine-learning-help-build-a-better-stock-portfolio-8e4b3334a49&amp;user=JP+Hwang&amp;userId=964fe0870229&amp;source=post_page-964fe0870229--post_author_info--8e4b3334a49---------------------follow_profile-----------" rel="noopener follow">Follow</a></span></div></div></div><div class="vy bh vz wa"></div></div></div><div class="h k j"><div class="vy bh vz wb"></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="wc ab lh jm"><div class="wd we l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b dv z du">Help</p></a></div><div class="wd we l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b dv z du">Status</p></a></div><div class="wd we l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/about?autoplay=1&amp;source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b dv z du">About</p></a></div><div class="wd we l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b dv z du">Careers</p></a></div><div class="wd we l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="pressinquiries@medium.com?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b dv z du">Press</p></a></div><div class="wd we l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b dv z du">Blog</p></a></div><div class="wd we l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b dv z du">Privacy</p></a></div><div class="wd we l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b dv z du">Terms</p></a></div><div class="wd we l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b dv z du">Text to speech</p></a></div><div class="wd l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/business?source=post_page-----8e4b3334a49--------------------------------" rel="noopener follow"><p class="bf b dv z du">Teams</p></a></div></div></div></div></div></div></div></div></div></div>



























</body></html>